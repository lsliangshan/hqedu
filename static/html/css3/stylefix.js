(function(f){typeof define==="function"?define("stylefix",f):f()})(function(require,exports,module){"use strict";!function(e,t){function n(){}function r(e){if(e&&!(e instanceof Array))if(e.toArray)e=r(e.toArray());else{if(!e.length)return;var t,n=[];for(t=0;t<e.length;t++)n.push(e[t]);e=n}return e}function o(t,n){n=n||q;var o;for(var a in T){var i,c,s=e;if(e[a]){for(i=T[a].replace("*",a).split(".");(c=i.shift())&&(s=s[c]););if("function"==typeof s){try{o=s(t,n)}catch(l){continue}if(o=r(o))return o}}}return(n.querySelectorAll?r(n.querySelectorAll(t)):0)||(/^\w+$/.test(t)?r(n.getElementsByTagName(t)):0)||[]}function a(t,r,o){w=!1;var i,c,s,l,u,f,d=/^\w+:\/\/[^\/]+/;if(o=o||n,u=L[t])A(function(){r(u)},0);else if(l=D[t])l.push(r);else{D[t]=[r],i=C?new C:new ActiveXObject("Microsoft.XMLHTTP"),i.onreadystatechange=function(){4===i.readyState&&s()},s=function(){var e=i.responseText.replace(/(^\s+|\s+$)/g,"");e&&(!i.status||i.status<400||i.status>600)?(L[t]=e,D[t].forEach(function(t){t(e)})):o(i)};try{i.open("GET",t),i.send()}catch(y){N?(i=new N,i.onerror=o,i.onprogress=n,i.onload=s,i.open("GET",t),i.send()):(f=function(e){C=(c||e).XMLHttpRequest,a(t,r,o)},(c=e.mOxie)?f():require?require.async(["mOxie"],f):d.test(t)?a(t.replace(d,""),r,o):o(i))}}}function i(e,n){var r=e.textContent;return n===t?r||(e.textContent=e.innerText):(e.styleSheet&&n!==r&&(e.styleSheet.cssText=n),void(e.textContent=n))}function c(e,t){t=t||{};var n=e.replace(/[^\/]+$/,""),r=(/^[a-z]{3,10}:/.exec(n)||[""])[0],o=(/^[a-z]{3,10}:\/\/[^\/]+/.exec(n)||[""])[0],c=/^([^?]*)\??/.exec(e)[1],s=t.style||q.createElement("style"),l=t.callback,u=t.after;a(e,function(t){n&&(t=t.replace(/url\(\s*?((?:"|')?)(.+?)\1\s*?\)/gi,function(e,t,a){return/^([a-z]{3,10}:|#)/i.test(a)?e:/^\/\//.test(a)?'url("'+r+a+'")':/^\//.test(a)?'url("'+o+a+'")':/^\?/.test(a)?'url("'+c+a+'")':'url("'+n+a+'")'}));var a=n.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1");t=t.replace(new RegExp("\\b(behavior:\\s*?url\\('?\"?)"+a,"gi"),"$1"),b=s,s.setAttribute("data-href",e),u&&u.parentNode?u.parentNode.insertBefore(s,u.nextSibling):q.documentElement.childNodes[0].appendChild(s),t=d(t,!0,s),i(s,t),l&&l(s),b=null},function(){if(!u){var t=q.createElement("link");t.rel="stylesheet",t.href=e,q.documentElement.childNodes[0].appendChild(t)}})}function s(e){function t(){var t=e.href,n=a.style,r=e.parentNode;!n||r&&n.getAttribute("data-href")===t||(n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)),r&&(n||(n=e[k],n&&n.parentNode||o('style[data-href="'+t+'"]')[0],a.style=n),c(t,a))}function n(){clearTimeout(r),r=A(t,0)}var r,a={callback:function(t){t.media=e.media,t.disabled=e.disabled,e[k]=a.style=t},after:e};/^stylesheet$/i.test(e.rel)&&(t(),h(e,"DOMAttrModified",n),h(e,"DOMNodeRemoved",n),e.attachEvent&&e.attachEvent("onpropertychange",n))}function l(e){if(!e.getAttribute("data-href")){var t=e.disabled;i(e,d(i(e),!0,e)),e.disabled=t}}function u(){$.length>1?(o("link").forEach(s),o("style").forEach(l),o("[style]").forEach(E),g||(g=!0,h(q,"DOMNodeInserted",function(e){var t=e.target;switch(t.tagName){case"STYLE":t!==b&&l(t);break;case"LINK":/^stylesheet$/i.test(t.rel)&&s(t);break;default:t.style&&E(t)}}))):A(u,50)}function f(e,n){$.splice(n===t?$.length:n,0,e)}function d(e,t,n){return $.forEach(function(r){e=r(e,t,n)||e}),e}function y(){v(function(){R.forEach(function(e){e()}),A(u,0)})}function h(e){var t=e.addEventListener;return t?(t.apply(e,[].slice.call(arguments,1)),!0):void 0}function p(e){x||(x=q.createElement("style")),b=x,M.insertBefore(x,M.firstChild),x.styleSheet?x.styleSheet.cssText+=e:x.textContent+=e,b=null}function m(){return/^(complete|interactive)$/.test(q.readyState)}function v(t){function n(){X||(X=!0,t())}try{return e.$(n)}catch(r){}if(m())A(n,0);else if(!h(q,"DOMContentLoaded",n)){q.attachEvent("onreadystatechange",function(){m()&&n()});var o;try{o=!e.frameElement&&q.documentElement}catch(a){}o&&o.doScroll&&!function i(){if(!X){try{o.doScroll("left")}catch(e){return A(i,50)}n()}}()}}Object.keys||require("es5-shim");var E,g,x,b,S,A=e.setTimeout,T={NW:"*.Dom.select",MooTools:"$$",DOMAssistant:"*.$",Prototype:"$$",YAHOO:"*.util.Selector.query",Sizzle:"*",jQuery:"*",dojo:"*.query"},$=[function(e){return e.replace(/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,"")}],q=e.document,M=q.head||q.documentElement.children[0],N=e.XDomainRequest,C=e.XMLHttpRequest,O=q.querySelector?q.documentMode:"CSS1Compat"===q.compatMode?"XMLHttpRequest"in e?7:6:5,w=q.querySelector||N,k="data-style",L={},D={},R=[];E=8>O?function(e){var t,n;t=e.style.cssText,n=d(t,!1,e),t!==n&&(e.style.cssText=n)}:function(e){var t,n;t=e.getAttribute("style"),t&&(n=d(t,!1,e),t!==n&&e.setAttribute("style",n))};var X=!1;y(),S={query:o,get:a,cssContent:i,load:c,addRestCss:p,linkElement:s,styleElement:l,styleAttribute:E,ieVersion:O,process:u,register:f,fix:d,ready:function(e){X?e():R.push(e)}};try{module.exports=S}catch(z){e.stylefix=S}}(window);});