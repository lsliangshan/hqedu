(function(f){typeof define==="function"?define("imageset",f):f()})(function(require,exports,module){"use strict";!function(e){function t(e){var t,r;return e.trim().split(/\s*,\s*/).forEach(function(e){e=e.match(/^(.*?)\s+([\d\.]+)x$/);var i=+e[2];i>=c&&(!r||r>=i)&&(r=i,t=e[1])}),t?t.replace(/(['"]?\s*\))?$/,"#"+r+"x$1"):void 0}function r(e){var r=e.srcset||e.getAttribute(u,2);r&&(r=t(r))&&r!==e.getAttribute("src")&&e.setAttribute("src",r)}function i(){n.query("img").forEach(r)}require("prefixfree"),require("supports");var n=e.stylefix||require("stylefix"),s=e.screen,c=e.devicePixelRatio||s.deviceXDPI/s.logicalXDPI||1,u="srcset";u in new Image||(e.addEventListener&&(["DOMAttrModified","DOMNodeInserted"].forEach(function(t){e.addEventListener(t,i,!1)}),Object.defineProperty(Image.prototype,u,{get:function(){return this.getAttribute(u,2)||""},set:function(e){e!==this[u]&&this.setAttribute(u,e),r(this)},enumerable:!0})),e.attachEvent&&e.attachEvent("onpropertychange",i),n.ready(i)),CSS.supports("background","image-set(url(foo.png) 1x)")||n.register(function(e){return e.replace(/([\s\:\,])image-set\(\s*(url\(.*?\)\s+\d+(\.\d+)?x(\s*,\s*url\(.*?\)\s+\d+(\.\d+)?x)*)\s*\)/gi,function(e,r,i){return r+(t(i)||e.slice(0))})})}(window);});